<html xmlns:th="http://www.thymeleaf.org">

    <div th:fragment="reviewList(reviews, link)">
        <h3 class="mt-5">Reviews</h3>
        <div>
            <table id="reviewsTable" class="table table-striped">
                <thead>
                <tr>
                    <th>Reviewer</th>
                    <th>Score</th>
                    <th>Comment</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="review : ${reviews}">
                    <td title="fact-checker" th:data-checker-id="${review.checker}"/>
                    <td th:text="${review.rating}"></td>
                    <td>
                        <span class="table-text" th:text="${review.comment}"/>
                    </td>
                </tr>
                </tbody>
            </table>

            <th:block th:if="${#authorization.expression('hasRole(''ROLE_USER'')')} and not ${#strings.isEmpty(link)}">
                <div th:replace="fragments/review :: reviewForm(${link})"></div>
            </th:block>

            <script>
                if ($('#reviewsTable tr').length > 0) {
                    handleTableRender($('#reviewsTable'));
                }
            </script>
        </div>
    </div>
</html>