<html xmlns:th="http://www.thymeleaf.org">

    <div th:fragment="reviewForm(action_path, review)">
        <!-- TODO:   Thymeleaf 3.0.15 issue with binding form-objects during list-iteration: only works if there's a
             TODO:   "review" object in the model (even though it's not the one getting bound to the form).
             TODO:   'th:field' syntax doesn't populate the inputs  -->
        <form th:action="${action_path}" th:object="${review}" method="post">
            <div class="row">
                <div class="col-4">
                    <label th:for="'rating' + ${review.id}" class="col-form-label">Reliability</label>
                    <input type="text" class="d-none" name="ownerId" th:value="${review.ownerId}" readonly/>
                    <input type="number" name="rating" th:value="${review.rating}" min="0" max="1" step="0.01"
                           class="form-control" th:id="'rating' + ${review.id}" placeholder="0.9"/>
                    <span th:if="${#fields.hasErrors('rating')}" th:errors="*{rating}" class="text-danger"></span>
                </div>
                <div class="col-8">
                    <label th:for="'comment' + ${review.id}" class="col-form-label">Comment</label>
                    <textarea name="comment" th:text="${review.comment}" class="form-control" th:id="'comment' + ${review.id}" cols="30"
                              placeholder="Explain your review..."></textarea>
                    <span th:if="${#fields.hasErrors('comment')}" th:errors="*{comment}" class="text-danger"></span>
                </div>

            </div>
            <div th:if="${#authorization.expression('hasRole(''ROLE_CHECKER'')')}" class="row mt-2">
                <div class="col">
                    <input type="submit" class="btn btn-primary" value="Submit"/>
                </div>
            </div>
        </form>
    </div>
</html>